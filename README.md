# Incline3D GUI

Графический интерфейс для модуля инклинометрии комплекса «ПРАЙМ».

## Описание

Incline3D GUI — кроссплатформенное Qt-приложение для визуализации и обработки данных инклинометрии скважин. Приложение работает поверх C++-ядра `incline3d-cpp20` и CLI-утилиты `inclproc`.

## Возможности

- **Работа с данными скважин**
  - Загрузка из форматов WS, CSV, LAS, ZAK
  - Ручной ввод данных с двумя вкладками (метаданные и массив замеров)
  - Импорт из LAS с выбором кривых и автодетекцией
  - Импорт из текстовых файлов ЗАК с настраиваемыми разделителями
  - Редактирование исходных данных замеров
  - Экспорт результатов в различные форматы

- **Визуализация**
  - 3D-аксонометрия траекторий скважин
  - План (горизонтальная проекция)
  - Вертикальная проекция на произвольный профиль
  - Отображение проектных точек и кругов допуска
  - Отображение пунктов возбуждения

- **Расчёты**
  - Методы: минимальной кривизны, сбалансированно-тангенциальный, средних углов, радиуса кривизны, кольцевой дуги
  - Расчёт интенсивностей искривления
  - Анализ погрешностей координат
  - Расчёт сближения скважин
  - Расчёт горизонтального отхода

- **Управление проектами**
  - Сохранение/загрузка проектов (.inclproj)
  - Автосохранение
  - Экспорт проекта в набор файлов
  - Восстановление сессии после аварийного завершения

- **Экспорт и отчёты**
  - Экспорт изображений видов (PNG, JPEG, BMP, TIFF)
  - Копирование изображений в буфер обмена
  - Редактирование шапки отчёта
  - Формирование заключений с 4 вкладками (шапка, результаты, проектные точки, сводка)
  - Экспорт отчётов в CSV, Excel-совместимый формат и HTML
  - Поддержка печати отчётов

## Требования

### Сборка
- CMake 3.20+
- C++20-совместимый компилятор (GCC 11+, Clang 14+, MSVC 2022)
- Qt 6.2+ (Core, Gui, Widgets, OpenGLWidgets, Concurrent, PrintSupport)

### Выполнение
- OpenGL 2.1+
- CLI-утилита `inclproc` (из пакета incline3d-cpp20)

## Сборка

```bash
# Конфигурация
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release

# Сборка
cmake --build build --parallel

# Запуск тестов
ctest --test-dir build --output-on-failure

# Установка
cmake --install build --prefix /opt/incline3d
```

### Опции CMake

| Опция | По умолчанию | Описание |
|-------|--------------|----------|
| `INCLINE3D_GUI_BUILD_TESTS` | `ON` | Собирать модульные тесты |
| `INCLINE3D_GUI_USE_CORE_LIB` | `OFF` | Линковать библиотеку primeincl_core |
| `INCLINE3D_GUI_STATIC_QT` | `OFF` | Использовать статическую сборку Qt |

### Статическая сборка

Для создания автономного исполняемого файла без зависимости от установленного Qt см. документацию [STATIC_BUILD.md](STATIC_BUILD.md).

```bash
# Сборка со статическим Qt
cmake -S . -B build-static \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_PREFIX_PATH=/path/to/qt6-static \
    -DINCLINE3D_GUI_BUILD_TESTS=OFF

cmake --build build-static --parallel
```

## Использование

```bash
# Запуск приложения
./incline3d-gui

# Открыть проект из командной строки
./incline3d-gui /path/to/project.inclproj

# Открыть файл данных
./incline3d-gui /path/to/well_data.ws
```

## Структура проекта

```
incline3d-gui/
├── src/
│   ├── app/          # Точка входа
│   ├── core/         # Ядро приложения (FileIO, Settings, ProcessRunner)
│   ├── models/       # Модели данных и Qt-модели
│   ├── ui/           # Главное окно и диалоги
│   ├── utils/        # Утилиты (логгер, работа с углами)
│   └── views/        # Виды визуализации (3D, план, вертикальный профиль)
├── tests/            # Модульные тесты
├── resources/        # Ресурсы приложения
└── docs/             # Документация
```

## Интеграция с inclproc

Приложение использует CLI-утилиту `inclproc` для выполнения расчётов. Путь к утилите можно настроить в меню «Настройки».

Поддерживаемые команды:
- `inclproc process` — обработка данных инклинометрии
- `inclproc convert` — конвертация форматов
- `inclproc report` — генерация отчётов
- `inclproc proximity` — анализ сближения скважин
- `inclproc offset` — расчёт горизонтального отхода

## Формат проекта

Файлы проекта (`.inclproj`) сохраняются в формате JSON:

```json
{
  "version": 1,
  "name": "Название проекта",
  "wells": [...],
  "project_points": [...],
  "shot_points": [...],
  "view_settings": {...}
}
```

## Горячие клавиши

| Комбинация | Действие |
|------------|----------|
| Ctrl+N | Новый проект |
| Ctrl+O | Открыть проект |
| Ctrl+S | Сохранить проект |
| Ctrl+Shift+O | Открыть файл данных |
| Ctrl+M | Ручной ввод данных |
| F5 | Обработать скважину |
| Shift+F5 | Обработать все скважины |
| F6 | Сформировать заключение |
| 1 | 3D-аксонометрия |
| 2 | План |
| 3 | Вертикальная проекция |
| Home | Сбросить вид |
| Delete | Удалить выбранную скважину |
| Ctrl+E | Экспорт изображения |
| Ctrl+Shift+C | Копировать в буфер обмена |

## Управление в видах

### 3D-аксонометрия
- ЛКМ + перетаскивание — вращение
- Ctrl + ЛКМ + перетаскивание — панорамирование
- Колесо мыши — масштабирование

### План и вертикальная проекция
- ЛКМ + перетаскивание — панорамирование
- Колесо мыши — масштабирование

## Автор

Ян Бубенок
- Email: yan@bubenok.com
- Telegram: @iBubenok
- GitHub: @iBubenok

## Лицензия

Проприетарная. © ООО «ПримГео», 2025.
